prep:
  cmd: python -m spacy run prep
  script:
    - python scripts/prepare.py assets/data.csv assets/docs_issues_training.jsonl
      assets/docs_issues_eval.jsonl
  deps: []
  outs:
    - path: assets/docs_issues_training.jsonl
      md5: 7c3d00fbd2c5ca2629abb5e537aef84c
    - path: assets/docs_issues_eval.jsonl
      md5: 54b5cc3b88f9585944feaae7585f39d2
  spacy_version: 3.2.3
  spacy_git_version: 99425de36
convert:
  cmd: python -m spacy run convert
  script:
    - python scripts/convert.py en assets/docs_issues_training.jsonl corpus/train.spacy
    - python scripts/convert.py en assets/docs_issues_eval.jsonl corpus/dev.spacy
  deps:
    - path: assets/docs_issues_training.jsonl
      md5: 4a39a8a8b0daf8a7694bdb826f230c3f
    - path: assets/docs_issues_eval.jsonl
      md5: 54b5cc3b88f9585944feaae7585f39d2
    - path: scripts/convert.py
      md5: 6cdc3de91a58165aa2628a90547dff83
  outs:
    - path: corpus/train.spacy
      md5: 9f6a482aaf5d250566f016a3cf182a3e
    - path: corpus/dev.spacy
      md5: bc2ae8882980d4086c58bfdf0ebcbf07
  spacy_version: 3.2.3
  spacy_git_version: 99425de36
train:
  cmd: python -m spacy run train
  script:
    - python -m spacy train configs/config.cfg --output training/ --paths.train corpus/train.spacy
      --paths.dev corpus/dev.spacy --nlp.lang en --gpu-id -1
  deps:
    - path: configs/config.cfg
      md5: null
    - path: corpus/train.spacy
      md5: dd157ca0303cb56a4fe6f3605b89adc2
    - path: corpus/dev.spacy
      md5: 3476aee8f65afd1f55295c8bea501c21
  outs:
    - path: training/model-best
      md5: 199f50b8d3a125515dd1baec4e979b0d
  spacy_version: 3.2.3
  spacy_git_version: 99425de36
train-sklearn:
  cmd: python -m spacy run train-sklearn
  script:
    - python scripts/train-sklearn.py assets/docs_issues_training.jsonl sklearn-trained
      cv
    - python scripts/train-sklearn.py assets/docs_issues_training.jsonl sklearn-trained
      tfidf
  deps:
    - path: configs/config-bow.cfg
      md5: 6d9c88e2e3d07b4ddccb50ce5ff9274e
    - path: configs/config-cnn.cfg
      md5: 8d07bcaf1306aa52df749829e444fb0f
    - path: corpus/train.spacy
      md5: 9f6a482aaf5d250566f016a3cf182a3e
    - path: corpus/dev.spacy
      md5: bc2ae8882980d4086c58bfdf0ebcbf07
  outs:
    - path: sklearn-trained/pipe_cv.joblib
      md5: 738336ad0562ddb8f9dc03f638f77612
    - path: sklearn-trained/pipe_tfidf.joblib
      md5: 754d78098b52cc51d8ba5a7675e067ee
  spacy_version: 3.2.3
  spacy_git_version: 99425de36
prepare:
  cmd: python -m spacy run prepare
  script:
    - python scripts/prepare.py assets/data.csv assets/docs_issues_training.jsonl
      assets/docs_issues_eval.jsonl
  deps: []
  outs:
    - path: assets/docs_issues_training.jsonl
      md5: 4a39a8a8b0daf8a7694bdb826f230c3f
    - path: assets/docs_issues_eval.jsonl
      md5: 54b5cc3b88f9585944feaae7585f39d2
  spacy_version: 3.2.3
  spacy_git_version: 99425de36
train-spacy:
  cmd: python -m spacy run train-spacy
  script:
    - python -m spacy train configs/config-bow.cfg --output training/bow/ --paths.train
      corpus/train.spacy --paths.dev corpus/dev.spacy --nlp.lang en --gpu-id -1
  deps:
    - path: configs/config-bow.cfg
      md5: 6d9c88e2e3d07b4ddccb50ce5ff9274e
    - path: configs/config-cnn.cfg
      md5: 8d07bcaf1306aa52df749829e444fb0f
    - path: corpus/train.spacy
      md5: 9f6a482aaf5d250566f016a3cf182a3e
    - path: corpus/dev.spacy
      md5: bc2ae8882980d4086c58bfdf0ebcbf07
  outs:
    - path: training/bow/model-best
      md5: 8bc0d4858ba92a8f0c1f955ea8b0a977
    - path: training/cnn/model-best
      md5: null
  spacy_version: 3.2.3
  spacy_git_version: 99425de36
evaluate:
  cmd: python -m spacy run evaluate
  script:
    - python scripts/evaluate.py assets/docs_issues_eval.jsonl
  deps:
    - path: assets/docs_issues_eval.jsonl
      md5: 54b5cc3b88f9585944feaae7585f39d2
    - path: sklearn-trained/pipe_cv.joblib
      md5: 738336ad0562ddb8f9dc03f638f77612
    - path: sklearn-trained/pipe_tfidf.joblib
      md5: 754d78098b52cc51d8ba5a7675e067ee
  outs: []
  spacy_version: 3.2.3
  spacy_git_version: 99425de36
